<div class="container-fluid proposal bg-secondary-dark">
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <h1 class="section-header__title text-white">
          {{ '@Proposals' | translate }}
        </h1>
      </div>
      <div class="col-sm-3">
        <div class="form-group form-group__inverted">
          <label>
            {{ '@Selling Point' | translate }}
          </label>
          <ng-select
            [clearable]="false"
            [searchable]="true"
            placeholder="Seleccione sucursal"
            [items]="sellingPoints"
            bindLabel="name"
            [(ngModel)]="selectedSellingPoint"
            (change)="sellingChange($event)"
          ></ng-select>
        </div>
      </div>
    </div>

    <div class="row button-selection-group">
      <div class="col-sm-4 offset-sm-4 text-center">
        <div
          class="btn-group btn-group-toggle"
          ngbRadioGroup
          name="proposals"
          [(ngModel)]="activeProposals"
          (ngModelChange)="onChangeActiveProposals($event)"
        >
          <label
            ngbButtonLabel
            class="btn-outline-secondary"
          >
            <input
              ngbButton
              type="radio"
              [value]="'monthlyTotals'"
            />
            {{ '@Month' | translate }}
          </label>
          <label
            ngbButtonLabel
            class="btn-outline-secondary"
          >
            <input
              ngbButton
              type="radio"
              [value]="'weeklyTotals'"
            />
            {{ '@Week' | translate }}
          </label>
          <label
            ngbButtonLabel
            class="btn-outline-secondary no-wrap-spacing"
          >
            <input
              ngbButton
              type="radio"
              [value]="'lastThreeDaysTotals'"
            />
            {{ '@3days' | translate }}
          </label>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-5 offset-sm-2 proposal-chart__container">
        <ngx-charts-pie-chart
          [view]="view"
          [scheme]="colorScheme"
          [results]="proposals"
          [legend]="showLegend"
          [explodeSlices]="explodeSlices"
          [labels]="showLabels"
          [doughnut]="doughnut"
          (select)="onSelect($event)"
          [arcWidth]="0.5"
        >
        </ngx-charts-pie-chart>
        <div class="proposal-chart__total">
          <div
            class="proposal-chart__total-button"
            (click)="dispatchStatus('')"
          >
            <h4 class="proposal-chart__total-title">
              {{ '@Total' | translate }}
            </h4>
            <h2 class="proposal-chart__total-value">{{ proposalsTotal }}</h2>
          </div>
        </div>
      </div>
      <div class="col-sm-4 m-auto">
        <div class="row proposal-chart__legend-list">
          <div
            class="mx-auto proposal-chart__legend-list-item"
            *ngFor="let selected of proposals"
            (click)="onSelect(selected)"
          >
            <div>
              <span
                class="proposal-chart__legend-color"
                [style.background]="selected.color"
              ></span>
              <h2 class="proposal-chart__legend-value">
                {{ selected.value }}
              </h2>
            </div>
            <p class="proposal-chart__legend-status">
              {{ selected.name }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>