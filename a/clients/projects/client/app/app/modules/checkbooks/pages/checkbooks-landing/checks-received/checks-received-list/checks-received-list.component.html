<div class="checks-received-list">
	<div *ngIf="loading" class="checks-received-list__loading">
		<voxel-loading-circle [showLoading]="true" size="large"></voxel-loading-circle>
	</div>

	<mcy-no-data-message *ngIf="!loading && !checks.length && hasAccountSelected"
		[message]="'pages.checkbooks.received.emptyMessage' | translate">
	</mcy-no-data-message>

	<table *ngIf="hasAccountSelected && !loading && checks.length"
		mat-table [dataSource]="checks"
		class="mat-elevation-z8"
		id="checks-received-list__table">

		<ng-container matColumnDef="icon">
			<th mat-header-cell *matHeaderCellDef></th>
			<td mat-cell *matCellDef class="checks-received-list__icon-column">
				<mcy-badge-icon type="caution" iconSize="27px" badgeSize="small">cheque_outline
				</mcy-badge-icon>
			</td>
		</ng-container>

		<ng-container matColumnDef="number">
			<th mat-header-cell *matHeaderCellDef>
				{{ 'pages.checkbooks.received.number' | translate }}
			</th>
			<td mat-cell *matCellDef="let check">
				{{ check.number }}
			</td>
		</ng-container>

		<ng-container matColumnDef="code">
			<th mat-header-cell *matHeaderCellDef>
				{{ 'pages.checkbooks.received.code' | translate }}
			</th>
			<td mat-cell *matCellDef="let check">{{ check.code }}</td>
		</ng-container>

		<ng-container matColumnDef="accreditationDate">
			<th mat-header-cell *matHeaderCellDef>
				{{ 'pages.checkbooks.received.accreditationDate' | translate }}
			</th>
			<td mat-cell *matCellDef="let check">
				{{ selectDate(check) }}
			</td>
		</ng-container>

		<ng-container matColumnDef="amount">
			<th mat-header-cell *matHeaderCellDef>
				{{ 'pages.checkbooks.received.amount' | translate }}
			</th>
			<td mat-cell *matCellDef="let check">
				{{ check.currency.symbol }} {{ check.amount | mcyAmount }}
			</td>
		</ng-container>

		<ng-container matColumnDef="state">
			<th mat-header-cell *matHeaderCellDef>
				{{ 'pages.checkbooks.received.state' | translate }}
			</th>
			<td mat-cell *matCellDef="let check" class="checks-received-list__state" [ngClass]="{
					'checks-received-list__state--pending-accreditation': check.state === 'PENDING_ACCREDITATION',
					'checks-received-list__state--accredited': check.state === 'ACCREDITED',
					'checks-received-list__state--discounted': check.state === 'DISCOUNTED',
					'checks-received-list__state--rejected': check.state === 'REJECTED'
				}">
				{{ 'pages.checkbooks.received.states.' + check.state | translate }}
			</td>
		</ng-container>

		<ng-container matColumnDef="options">
			<th mat-header-cell *matHeaderCellDef></th>
			<td mat-cell *matCellDef="let check; let cellIndex = index" class="checks-received-list__icon-column">
				<mcy-icon-button [id]="'checks-received-list__show-details-button-' + cellIndex"
					class="checks-received-list__options-icon" [matMenuTriggerFor]="optionsMenu" *ngIf="showOptionsButton(check)">
					outros
				</mcy-icon-button>
				<mat-menu #optionsMenu="matMenu" xPosition="before">
					<span
						mat-menu-item class="checks-received-list__option-text" *ngIf="showOption(check)" (click)="downloadBouncedCheckNote(check)">
						{{ 'pages.checkbooks.received.downloadAttachedNote' | translate }}
					</span>
					<span mat-menu-item class="checks-received-list__option-text" (click)="downloadImage(check)" *ngIf="showDownloadImage(check)">
						{{ 'pages.checkbooks.received.downloadImage' | translate }}
					</span>
					<span mat-menu-item class="checks-received-list__option-text" *ngIf="showOption(check)"
						(click)="showReasonRejection(check)">
						{{ 'pages.checkbooks.received.reasonRejection' | translate }}
					</span>
				</mat-menu>
			</td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
	</table>
</div>
