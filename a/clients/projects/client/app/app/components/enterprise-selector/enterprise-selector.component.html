<div class="enterprise-selector">
	<h4 class="enterprise-selector__title">
		{{ 'pages.enterprises.selectEnterprise' | translate }}:
	</h4>

	<div class="enterprise-selector__search">
		<mcy-input
			[id]="'enterprise-selector__search'"
			[icon]="'busca_outline'"
			[label]="'pages.enterprises.search' | translate"
			[type]="'text'"
			(handleChange)="onSearch($event)"
			[placeholder]="'pages.enterprises.search' | translate"
		></mcy-input>
	</div>

	<div class="enterprise-selector__table-container">
		<span class="enterprise-selector__text">
			{{ totalEnterprisesToDisplay.length }}
			{{ 'pages.enterprises.enterprises' | translate }}
		</span>
		<table mat-table
			class="enterprise-selector__table"
			id="enterprise-selector__table"
			[dataSource]="enterpriseListTableSource">
			<ng-container matColumnDef="favorite">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let enterprise; let cellIndex = index">
					<div class="enterprise-selector__icons-section" >
						<mcy-contextual-button
							[disabled]="updateEnterpriseDefaultLoading"
							class="enterprise-selector__favorite"
							(handleClick)="onFavoriteClick(enterprise, $event)"
							[sufixIcon]="enterpriseState.enterpriseDefault === enterprise.id ? 'empresas' : 'empresas_outline'"
							[id]="'enterprise-selector__favorite-button-' + cellIndex">
						</mcy-contextual-button>
					</div>
				</td>
			</ng-container>

			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let enterprise">
					<span class="enterprise-selector__text">
						{{ enterprise.name }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="cuilt">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let enterprise">
					<span class="enterprise-selector__text">
						{{ 'pages.enterprises.cuilt' | translate }}: {{ enterprise.cuilt }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="actions">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let enterprise">
					<div class="enterprise-selector__icons-section">
						<mcy-icon-button
							class="enterprise-selector__icon-actions enterprise-selector__arrow">
							seta_direita
						</mcy-icon-button>
					</div>
				</td>
			</ng-container>

			<tr
				mat-header-row
				*matHeaderRowDef="displayedColumns"
			>
			<tr
				mat-row
				class="enterprise-selector__row"
				*matRowDef="let row; columns: displayedColumns; let cellindex = index"
				(click)="enterpriseSelected(row)"
				id="enterprise-selector__row-{{cellindex}}"
			>
			</tr>
		</table>
		<div class="enterprise-selector__show-more"
			*ngIf="totalEnterprisesToDisplay.length > itemsDisplayed"
			(click)="showMoreEnterprises()">
			<mcy-contextual-button
				class="enterprise-selector__show-more-label"
				(handleClick)="showMoreEnterprises()"
				[sufixIcon]="'seta_baixo'"
				[id]="'enterprise-selector__show-more-button'">
				{{ 'pages.enterprises.more' | translate }}
			</mcy-contextual-button>
		</div>
	</div>
</div>
