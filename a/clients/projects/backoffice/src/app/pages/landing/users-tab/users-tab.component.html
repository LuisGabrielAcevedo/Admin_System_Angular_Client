<div class="users-tab">
	<div class="users-tab__body"
		*ngIf="!userState.loadingUser && !userState.hasUserErrors">
		<div class="users-tab__header">
			<span class="users-tab__search-number">
				{{ totalUsersToDisplay.length }}
			</span>
			<span class="users-tab__search-label">
				 {{ 'pages.usersTab.searchResults' | translate }}
			</span>
		</div>
		<form [formGroup]="form" class="users-tab__search-form">
			<mcy-input
				[label]="'pages.usersTab.label' | translate"
				formControlName="searchKeyword"
				[validators]="searchKeywordValidators"
				(handleChange)="onSearch($event)"
				class="users-tab__search-form-input"
				[prefixIcon]="'busca_outline'"
			>
			</mcy-input>
		</form>

		<table mat-table
			class="users-tab__table"
			id="users-tab__table"
			[dataSource]="usersListTableSource">
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef>
					{{ 'pages.usersTab.fullname' | translate }}
				</th>
				<td mat-cell *matCellDef="let users">
					<span class="users-tab__text">
						{{ users.firstName }} {{ users.lastName }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="document">
				<th mat-header-cell *matHeaderCellDef>
					{{ 'pages.usersTab.document' | translate }}
				</th>
				<td mat-cell *matCellDef="let users">
					<span class="users-tab__text">
						{{ users.documentNumber }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="cellphone">
				<th mat-header-cell *matHeaderCellDef>
					{{ 'pages.usersTab.phone' | translate }}
				</th>
				<td mat-cell *matCellDef="let users">
					<span class="users-tab__text">
						{{ users.cellPhone }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="email">
				<th mat-header-cell *matHeaderCellDef>
					{{ 'pages.usersTab.email' | translate }}
				</th>
				<td mat-cell *matCellDef="let users">
					<span class="users-tab__text">
						{{ users.email }}
					</span>
				</td>
			</ng-container>

			<ng-container matColumnDef="icon">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef>
					<div class="users-tab__icons-section">
						<mcy-icon class="users-tab__icon">seta_direita</mcy-icon>
					</div>
				</td>
			</ng-container>

			<tr
				mat-header-row
				*matHeaderRowDef="displayedColumns">
			</tr>
			<tr mat-row
				*matRowDef="let row; columns: displayedColumns; let cellindex = index"
				(click)="handleUserSelected(row)"
				class="users-tab__row"
				id="users-tab__row-{{cellindex}}">
			</tr>
		</table>

		<div class="users-tab__show-more"
			*ngIf="totalUsersToDisplay.length > itemsDisplayed"
			(click)="showMoreUsers()">
			<mcy-contextual-button
				class="users-tab__show-more-label"
				(handleClick)="showMoreUsers()"
				[sufixIcon]="'seta_baixo'"
				[id]="'users-tab__show-more-button'">
				{{ 'pages.usersTab.more' | translate }}
			</mcy-contextual-button>
		</div>
	</div>

	<div class="users-tab__spinner-container"
		*ngIf="userState.loadingUser">
		<voxel-loading-circle
			[showLoading]="true"
				size="large">
		</voxel-loading-circle>
	</div>

	<mcy-loading-data-error
		*ngIf="userState.hasUserErrors"
		[displayRetry]="true"
		(handleOnRetry)="onSubmit()"
	></mcy-loading-data-error>
</div>
